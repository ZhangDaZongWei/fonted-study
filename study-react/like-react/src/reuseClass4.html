<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>React</title>
</head>
<body>
  <div class="wrapper"></div>

  <script>
      // å­—ç¬¦ä¸²è½¬DOMç»“æ„å‡½æ•°
    const strToDom = (str) => {
      let div = document.createElement('div')
      div.innerHTML = str
      return div
    }
    class LikeButton {
      constructor() {
        this.state = {
          isLike: true
        }
      }

      setState(state) {
        this.state = state
        let oldEl = this.el
        // å†…éƒ¨é‡æ–°renderäº†ï¼Œä½†æ˜¯å¤–éƒ¨æ’å…¥wrapperä¸­çš„DOMå´æ²¡æœ‰æ”¹å˜ï¼Œæ‰€ä»¥ç•Œé¢æ²¡æœ‰ä»»ä½•å˜åŒ–
        this.el = this.render()
        if (this.changeUi) {
          this.changeUi(oldEl,this.el)
        }
      }

      // è§£å†³ä¸Šè¿°é—®é¢˜çš„æ–¹æ³•æ˜¯çŠ¶æ€æ”¹å˜ï¼Œé‡æ–°renderæ•´ä¸ªé¡µé¢ï¼Œè¿™ä¼šè®©æµè§ˆå™¨çš„è´Ÿæ‹…åŠ å¤§ï¼Œåº”ç”¨ä¼šå˜æ…¢ï¼Œä¸è¿‡è¿™å¯ä»¥æœ‰è™šæ‹ŸDOMè§£å†³

      changeLike() {
        this.setState({
          isLike: !this.state.isLike
        })
      }

      render() {
        const { isLike } = this.state
        this.el = strToDom(`<button class="like-btn" type="button">
          <span class="like-text">${isLike ? 'ç‚¹èµ' : 'å–æ¶ˆ'}</span>
          <span class="like-icon">${isLike ? 'ğŸ‘' : 'ğŸ‘'}</span>
        </button>`)
        this.el.addEventListener('click',this.changeLike.bind(this),false)
        return this.el
      }
    }
    const div = document.querySelector('.wrapper')
    let likeButton = new LikeButton()
    div.appendChild(likeButton.render())
    // åœ¨å¤–éƒ¨æ–°å¢ä¸€ä¸ªå˜æ¢å‡½æ•°ï¼Œç”¨æ¥æ›´æ–°æ’å…¥wrapperä¸­çš„DOM
    likeButton.changeUi = (oldEl,newEl) => {
      div.insertBefore(newEl,oldEl)
      div.removeChild(oldEl)
    }
  </script>
</body>
</html>