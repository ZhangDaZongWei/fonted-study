#### TCP协议

> 参考链接：[TCP协议](https://juejin.im/book/5bdc715fe51d454e755f75ef/section/5c447392e51d45524b02eaf5)

### 补充

#### 连接时为什么要三次握手，而不是两次？

1. 因为客户端发送请求连接之后，知道自己的发送能力正常；服务端接收数据并且发送确认后，知道自己接收和发送能力正常，客户端发送能力正常；客户端接收到确认数据之后，知道自己接收能力正常，服务端接收发送能力正常；客户端再发送确认数据，服务端接收后，知道客户端接收能力正常。也就是说，两方要确定各自的发送和接收能力都正常。
2. 举个例子，假设A发送了请求报文，B接收了请求报文并且回应了确认报文，如果是两次握手，则B已经认为可以发送数据和接收数据了，可是确认报文丢失了，A也就不知道B是否收到数据并应答。这时B向A发送了数据，A之后等待确认报文而是不会接收数据的。

#### TCB

首先`TCP`是使用`socket`数据结构来实现不同设备通信的连接不相互影响。为了将数据能正确地分发给不同的设备，`TCP`使用了`TCB`，即传输控制块的数据结构，把发给不同设备的信息封装起来。两个设备在进行连接之前会进行准备工作，建立起`TCB`就是其中之一。